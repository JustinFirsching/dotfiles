# Hyprland Keybindings
# Migrated from i3 config
# ==============================================================================

# ==============================================================================
# MOD KEY DEFINITION
# ==============================================================================
# Easy to change: just swap ALT with SUPER (or any other modifier)
# Modifiers: SUPER, ALT, CTRL, SHIFT
$mod = ALT

# ==============================================================================
# ESSENTIAL BINDINGS
# ==============================================================================

# Terminal
bind = $mod, Return, exec, foot

# Kill focused window (like i3's $alt+Shift+q)
bind = $mod SHIFT, Q, killactive

# Application launcher (replaces i3-dmenu-desktop)
bind = $mod, D, exec, wofi --show drun

# Lock screen (replaces i3lock)
bind = $mod CONTROL, L, exec, hyprlock

# Exit Hyprland (like i3's exit)
bind = $mod SHIFT, E, exit

# Reload Hyprland configuration (like i3's reload)
bind = $mod SHIFT, R, exec, hyprctl reload

# ==============================================================================
# WINDOW FOCUS (vim-style like i3)
# ==============================================================================
bind = $mod, H, movefocus, l
bind = $mod, J, movefocus, d
bind = $mod, K, movefocus, u
bind = $mod, L, movefocus, r

# Arrow key alternatives
bind = $mod, Left, movefocus, l
bind = $mod, Down, movefocus, d
bind = $mod, Up, movefocus, u
bind = $mod, Right, movefocus, r

# ==============================================================================
# WINDOW MOVEMENT (like i3's move)
# ==============================================================================
bind = $mod SHIFT, H, movewindow, l
bind = $mod SHIFT, J, movewindow, d
bind = $mod SHIFT, K, movewindow, u
bind = $mod SHIFT, L, movewindow, r

# Arrow key alternatives
bind = $mod SHIFT, Left, movewindow, l
bind = $mod SHIFT, Down, movewindow, d
bind = $mod SHIFT, Up, movewindow, u
bind = $mod SHIFT, Right, movewindow, r

# ==============================================================================
# WINDOW LAYOUT
# ==============================================================================

# Toggle split direction (like i3's $mod+b and $mod+v combined)
bind = $mod, B, layoutmsg, togglesplit
bind = $mod, V, layoutmsg, togglesplit

# Fullscreen (like i3's fullscreen toggle)
bind = $mod, F, fullscreen, 0

# Toggle floating (like i3's floating toggle)
bind = $mod SHIFT, Space, togglefloating

# Cycle through windows (alternative to i3's focus mode_toggle)
bind = $mod, Space, cyclenext

# Pseudo-tiling (similar to i3's stacking/tabbed - window keeps preferred size)
bind = $mod, S, pseudo

# Toggle tabbed-like view (Hyprland groups)
bind = $mod, W, togglegroup

# Cycle through grouped windows (like tabbed in i3)
bind = $mod, E, changegroupactive, f

# Focus parent (Hyprland doesn't have exact equivalent, but groups are similar)
# bind = $mod, A, focusparent

# ==============================================================================
# WORKSPACES
# ==============================================================================

# Switch to workspace
bind = $mod, 1, workspace, 1
bind = $mod, 2, workspace, 2
bind = $mod, 3, workspace, 3
bind = $mod, 4, workspace, 4
bind = $mod, 5, workspace, 5
bind = $mod, 6, workspace, 6
bind = $mod, 7, workspace, 7
bind = $mod, 8, workspace, 8
bind = $mod, 9, workspace, 9
bind = $mod, 0, workspace, 10

# Move focused window to workspace
bind = $mod SHIFT, 1, movetoworkspace, 1
bind = $mod SHIFT, 2, movetoworkspace, 2
bind = $mod SHIFT, 3, movetoworkspace, 3
bind = $mod SHIFT, 4, movetoworkspace, 4
bind = $mod SHIFT, 5, movetoworkspace, 5
bind = $mod SHIFT, 6, movetoworkspace, 6
bind = $mod SHIFT, 7, movetoworkspace, 7
bind = $mod SHIFT, 8, movetoworkspace, 8
bind = $mod SHIFT, 9, movetoworkspace, 9
bind = $mod SHIFT, 0, movetoworkspace, 10

# Move workspace to other monitor (like i3's move workspace to output)
bind = $mod SHIFT, comma, movecurrentworkspacetomonitor, l
bind = $mod SHIFT, period, movecurrentworkspacetomonitor, r

# Scroll through workspaces with mouse wheel
bind = $mod, mouse_down, workspace, e+1
bind = $mod, mouse_up, workspace, e-1

# ==============================================================================
# MOUSE BINDINGS (like i3's floating_modifier)
# ==============================================================================

# Move/resize windows with mod + mouse
bindm = $mod, mouse:272, movewindow      # Left click to move
bindm = $mod, mouse:273, resizewindow    # Right click to resize

# ==============================================================================
# FUNCTION KEYS - AUDIO
# ==============================================================================
# Using wpctl (pipewire) instead of pactl for better Wayland integration
# bindel = repeatable even when locked

bindel = , XF86AudioRaiseVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%+
bindel = , XF86AudioLowerVolume, exec, wpctl set-volume @DEFAULT_AUDIO_SINK@ 5%-
bindel = , XF86AudioMute, exec, wpctl set-mute @DEFAULT_AUDIO_SINK@ toggle
bindel = , XF86AudioMicMute, exec, wpctl set-mute @DEFAULT_AUDIO_SOURCE@ toggle

# ==============================================================================
# FUNCTION KEYS - BRIGHTNESS
# ==============================================================================
# Using brightnessctl instead of xbacklight for Wayland

bindel = , XF86MonBrightnessUp, exec, brightnessctl set +5%
bindel = , XF86MonBrightnessDown, exec, brightnessctl set 5%-

# ==============================================================================
# RESIZE SUBMAP (like i3's resize mode)
# ==============================================================================

# Enter resize mode
bind = $mod, R, submap, resize

# Resize mode bindings
submap = resize

# Vim-style resize
binde = , H, resizeactive, -10 0
binde = , J, resizeactive, 0 10
binde = , K, resizeactive, 0 -10
binde = , L, resizeactive, 10 0

# Arrow key resize
binde = , Left, resizeactive, -10 0
binde = , Down, resizeactive, 0 10
binde = , Up, resizeactive, 0 -10
binde = , Right, resizeactive, 10 0

# Exit resize mode
bind = , Return, submap, reset
bind = , Escape, submap, reset
bind = $mod, R, submap, reset

submap = reset

# ==============================================================================
# GAPS SUBMAP (like i3-gaps mode)
# ==============================================================================

# Enter gaps mode
bind = $mod, G, submap, gaps

submap = gaps

# Increase/decrease gaps
binde = SHIFT, plus, exec, hyprctl keyword general:gaps_in $(($(hyprctl getoption general:gaps_in -j | jq '.int') + 1)) && hyprctl keyword general:gaps_out $(($(hyprctl getoption general:gaps_out -j | jq '.int') + 1))
binde = , minus, exec, hyprctl keyword general:gaps_in $(($(hyprctl getoption general:gaps_in -j | jq '.int') - 1)) && hyprctl keyword general:gaps_out $(($(hyprctl getoption general:gaps_out -j | jq '.int') - 1))

# Reset gaps to default
bind = , equal, exec, hyprctl keyword general:gaps_in 10 && hyprctl keyword general:gaps_out 10
bind = , 0, exec, hyprctl keyword general:gaps_in 0 && hyprctl keyword general:gaps_out 0

# Exit gaps mode
bind = , Return, submap, reset
bind = , Escape, submap, reset

submap = reset

# ==============================================================================
# UTILITY BINDINGS
# ==============================================================================

# Screenshot (full screen)
bind = , Print, exec, grim ~/Pictures/Screenshots/$(date +%Y-%m-%d_%H-%M-%S).png

# Screenshot (region selection)
bind = SHIFT, Print, exec, grim -g "$(slurp)" ~/Pictures/Screenshots/$(date +%Y-%m-%d_%H-%M-%S).png

# Screenshot (region to clipboard)
bind = $mod SHIFT, S, exec, grim -g "$(slurp)" - | wl-copy
