# Hyprland Autostart Configuration
# Programs to run on startup
# ==============================================================================

# ==============================================================================
# ENVIRONMENT VARIABLES (important for Wayland compatibility)
# ==============================================================================

# XDG Desktop Portal (for screen sharing, file dialogs, etc.)
exec-once = dbus-update-activation-environment --systemd WAYLAND_DISPLAY XDG_CURRENT_DESKTOP
exec-once = systemctl --user import-environment WAYLAND_DISPLAY XDG_CURRENT_DESKTOP

# Cursor theme
env = XCURSOR_SIZE,24

# Qt Wayland
env = QT_QPA_PLATFORM,wayland
env = QT_WAYLAND_DISABLE_WINDOWDECORATION,1

# GTK
env = GDK_BACKEND,wayland,x11

# ==============================================================================
# CORE SERVICES
# ==============================================================================

# Status bar (replaces polybar)
exec-once = waybar

# Wallpaper (replaces feh) - random on every config reload
exec = swww-daemon || true
exec = swww img $(find ~/.wallpapers -type f | shuf -n 1)

# Idle management / screen locker (replaces xss-lock)
exec-once = hypridle

# Notification daemon
exec-once = mako

# ==============================================================================
# OPTIONAL SERVICES
# ==============================================================================

# Polkit agent (for GUI privilege escalation)
exec-once = /usr/lib/polkit-gnome/polkit-gnome-authentication-agent-1

# Clipboard manager (optional)
# exec-once = wl-paste --watch cliphist store

# Network Manager applet (optional, if using nm-applet)
# exec-once = nm-applet --indicator
